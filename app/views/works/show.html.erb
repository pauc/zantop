<% content_for :sidebar do %>
  <% cache [I18n.locale, :related_works, @visual_work] do %>
    <% unless @related_works.empty? %>
      <div class="sidebar-block">
        <h2><%= t 'works.labels.related' %></h2>
        <ul class="related-works vertical-list">
          <% @related_works.each do |w| %>
            <li>
              <%= link_to w.title, w %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  <% end %>
<% end %>
<%= page_title @visual_work.title %>

<% cache [I18n.locale, :show, @visual_work] do %>
  <%= print_work_place @visual_work %>
  <%= print_work_date @visual_work %>
  <% unless @visual_work.images.empty? %>
    <div id="image_gallery_container">
      <div id="galleria">
        <% @visual_work.images.includes(:translations).each do |image| %>
          <% if image.image? %>
            <%= link_to image_tag(image.image.thumb.to_s, data: { title: image.credits }),
              image.image.to_s %>
            <% end %>
          <% if image.video? %>
            <%= link_to content_tag(:span, "Watch this video", class: "video",
                                    data: {title: image.credits }),
              image.video %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
  <%= print_work_field @visual_work, :techniques %>
  <%= print_work_field @visual_work, :dimensions %>
  <%= print_work_description @visual_work %>
  <% unless @visual_work.sections.empty? %>
    <%= render @visual_work.sections %>
  <% end %>
  <%= print_work_tags @visual_work %>
<% end %>
